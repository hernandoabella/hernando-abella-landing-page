<!-- Made by Hernando Abella -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adivina la Palabra</title>
    <link href="https://fonts.googleapis.com/css?family=Kaushan+Script|Mr+Dafoe|Nothing+You+Could+Do|Yellowtail|Roboto" rel="stylesheet">
    <link rel="stylesheet" href="./component.css">
    <link rel="stylesheet" href="/temaPrism.css">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
</head>
<body>
    <div class="backbar">
        <a href="/proyectos/"><i class="fas fa-arrow-left"></i></a>
    </div>

    <section class="codigo__del__proyecto">
        <div class="app__background">
            <div class="app__container">
                
                <!-- app code goes here -->

                <div class="s">
                <div class="container">
                  <h1 class="title">ðŸ”® Adivina la Palabra</h1>
                  <p><h3 id="welcome" class="blink">Â¡Presiona cualquier tecla para empezar!</h5></p>
                  <br>
                  <div class="wordStuff"><h4>Palabra: <span id="currentWord"></span></h5></div>
                  <br>
                  <div class="necesitoEspacio"><h4>Palabras Adivinadas: <span id="totalWins" class="varColor"></span></h6></div>
                  <div class="necesitoEspacio"><h4>Intentos Restantes: <span id="remainingGuesses" class="varColor"></span></h6></div>
                  <div class="necesitoEspacio"><h4>Letras Usadas: <span id="guessedLetters" class="varColor"></span></h6></div>
              </div>

                </div>
                
                <!-- app code goes here -->

            </div>
        </div>        
        <section class="contenido__proyecto">
            <h1 class="h1">ðŸ”® Adivina la Palabra</h1>
        <br>
        <p>âš¡ Adivine la palabra para ganar el juego.</p>
        <br>
        <p><b>Dificultad:</b> â˜…â˜…â˜…â˜†â˜†</p>
        <br>
        <div class="flexNav">
            <ul class="breadcrumb">
                <li><a href="/index.html">Inicio</a></li>
                <li><a href="/proyectos">Proyectos</a></li>
                <li>Adivina la Palabra</li>
            </ul>
        
            <div class="download">
                <a href="../adivina-la-palabra.rar" download><i class="fas fa-download"></i></a>
                <a href="#">YouTube</a>
            </div>
        </div>

        <br>

        <div class="code__container">
            <h5 class="html__tag">HTML</h5>
            <div class="panel">
                    <div class="codigo__htmlt">
                        <div class="decor__bar html"></div>
                        <pre class="line-numbers"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;
    &lt;link href=&quot;https://fonts.googleapis.com/css?family=M+PLUS+Rounded+1c&amp;display=swap&quot; rel=&quot;stylesheet&quot;&gt;
    &lt;title&gt;&#x1F52E; Adivina la Palabra&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    
    &lt;div class=&quot;container&quot;&gt;
        &lt;h1 class=&quot;title&quot;&gt;&#x1F52E; Adivina la Palabra&lt;/h1&gt;
        &lt;p&gt;&lt;h3 id=&quot;welcome&quot; class=&quot;blink&quot;&gt;&iexcl;Presiona cualquier tecla para empezar!&lt;/h5&gt;&lt;/p&gt;
        &lt;br&gt;
        &lt;div class=&quot;wordStuff&quot;&gt;&lt;h4&gt;Palabra: &lt;span id=&quot;currentWord&quot;&gt;&lt;/span&gt;&lt;/h5&gt;&lt;/div&gt;
        &lt;br&gt;
        &lt;div class=&quot;necesitoEspacio&quot;&gt;&lt;h4&gt;Palabras Adivinadas: &lt;span id=&quot;totalWins&quot; class=&quot;varColor&quot;&gt;&lt;/span&gt;&lt;/h6&gt;&lt;/div&gt;
        &lt;div class=&quot;necesitoEspacio&quot;&gt;&lt;h4&gt;Intentos Restantes: &lt;span id=&quot;remainingGuesses&quot; class=&quot;varColor&quot;&gt;&lt;/span&gt;&lt;/h6&gt;&lt;/div&gt;
        &lt;div class=&quot;necesitoEspacio&quot;&gt;&lt;h4&gt;Letras Usadas: &lt;span id=&quot;guessedLetters&quot; class=&quot;varColor&quot;&gt;&lt;/span&gt;&lt;/h6&gt;&lt;/div&gt;
    &lt;/div&gt;

    &lt;script src=&quot;./script.js&quot;&gt;&lt;/script&gt;
   
&lt;/body&gt;
&lt;/html&gt;</code></pre></div>
                </div>
            
            <hr>

            <h5 class="css__tag">CSS</h5>
            <div class="panel">
                    <div class="codigo__css">
                        <div class="decor__bar css"></div>
                        <pre class="line-numbers"><code class="language-css">body {
    background: #fff0ce;
    font-family: 'M PLUS Rounded 1c', sans-serif;
}

.container {
    color: #f7db9a;
    background: rgba(62, 11, 150, 0.8) !important;
    border: 2px solid #f9e4b2 !important;
    box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
    width: 400px;
    border-radius: 25px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

.title{
    text-align: center;
}

#welcome{
    text-align: center;
    padding: 20px !important;
}

#currentWord {
    font-size: 1.3em;
    letter-spacing: 4px;
    color: #f9c0b1;
}

.wordStuff{
    text-align: center;
}

.varColor {
    color: #b1c6f9;
}

.noBlink {
    visibility: hidden;
}

.necesitoEspacio{
    margin-left: 20px;
    margin-bottom: 20px !important;
}

@keyframes blink{

    0%{
        opacity: 0;
    }
    
    50%{
        opacity: .5;
    }

    100%{
        opacity: 1;

    }   

}
</code></pre></div>
                </div>

            <hr>

            <h5 class="javascript__tag">JAVASCRIPT</h5>
            
            <div class="panel">
                    <div class="codigo__javascript">
                        <div class="decor__bar javascript"></div>
                        <pre class="line-numbers"><code class="language-javascript">const possibleWords = [
  "MENTE", 
  "ALMA", 
  "POSITIVO", 
  // "CORAZON",
  // "ESPIRITU", 
  // "ENERGIA", 
  // "PROSPERIDAD", 
  // "DRAGON", 
  // "AGUILA"
];

const guessedLetters = [];
const guessingWord = [];
const usedGuessingwWords = [];
let wordToMatch;
let numGuess;
let wins = 0;
let pause = false; // Esta funciÃ³n var y setTimout es para no escuchar la pulsaciÃ³n de teclas mientras se reinicia el juego
let loseSound = new Audio("./assets/sounds/ahahah.mp3");
let winSound = new Audio("./assets/sounds/clever.wav");
let championSound = new Audio("./assets/sounds/crazysob.mp3");

// Inicia el juego
function initializeGame() {

  // Obtener una nueva palabra
  wordToMatch = possibleWords[Math.floor(Math.random() * possibleWords.length)].toUpperCase();
  // Establezca el nÃºmero de aciertos (mayor o menor) segÃºn la longitud de la palabra
  if (wordToMatch.length <= 4) {
    numGuess = 4
  } else if (wordToMatch.length >4 && wordToMatch.length <= 7) {
    numGuess = Math.floor(wordToMatch.length * .67)
  } else if (wordToMatch.length >7 && wordToMatch.length <= 10) {
    numGuess = Math.floor(wordToMatch.length * .5)
  } else if (wordToMatch.length >10 && wordToMatch.length <= 14) {
    numGuess = Math.floor(wordToMatch.length * .52)
  } else if (wordToMatch.length >14) {
    numGuess = 7;
  }

  // Obtener guiones bajos para guessingWord desde wordToMatch
  for (var i=0; i < wordToMatch.length; i++){
    // Coloque un espacio en lugar de un guiÃ³n bajo entre las opciones de varias palabras en el arreglo de palabras posibles
    if (wordToMatch[i] === " ") {
      guessingWord.push(" ")
    } 
    else {
      guessingWord.push("_");
    }
  }
  
  updateDisplay();
};

// Reiniciar el juego
function resetGame() {
  if (usedGuessingwWords.length === possibleWords.length) {
    championSound.play() // Activa el comentario de lÃ­nea para casi todo el arreglo de palabras posibles para escuchar este clip de sonido al final del juego
    usedGuessingwWords = []
    wins = 0
    setTimeout(resetGame, 6000); // Nota para cambios futuros: acorte las palabras posibles, haga que jumbotron muestre un mensaje de felicitaciÃ³n al adivinar todas las posibilidades
  }else {
    pause = false;
    // Restaura el mensaje parpadeante "... empezar"
    document.getElementById('welcome').className = 'blink';
    
    // Obtener una nueva palabra
    wordToMatch = possibleWords[Math.floor(Math.random() * possibleWords.length)].toUpperCase();
    console.log(wordToMatch)
    // Si una nueva palabra ya ha sido usada aleatoriamente selecciona otra
    if (usedGuessingwWords.includes(wordToMatch) === true) {
      resetGame();
    }
    
    // Establezca el nÃºmero de aciertos (mayor o menor) segÃºn la longitud de la palabra
    if (wordToMatch.length <= 4) {
      numGuess = 4
    } else if (wordToMatch.length > 4 && wordToMatch.length <= 7) {
      numGuess = Math.floor(wordToMatch.length * .67)
    } else if (wordToMatch.length > 7 && wordToMatch.length <= 10) {
      numGuess = Math.floor(wordToMatch.length * .5)
    } else if (wordToMatch.length > 10 && wordToMatch.length <= 14) {
      numGuess = Math.floor(wordToMatch.length * .52)
    } else if (wordToMatch.length > 14) {
      numGuess = 7;
    }

    // Reinicia los arreglos de las palabras
    guessedLetters = [];
    guessingWord = [];

    // Reinicia la palabra adivinada
    for (var i=0; i < wordToMatch.length; i++){
      // Coloque un espacio en lugar de un guiÃ³n bajo entre las opciones de varias palabras en el arreglo de palabras posibles
      if (wordToMatch[i] === " ") {
        guessingWord.push(" ")
      } 
      else {
        guessingWord.push("_");
      }
    }
    updateDisplay();
  }
};

// Actualizar la pantalla
function updateDisplay () {
  document.getElementById("totalWins").innerText = wins;
  document.getElementById("currentWord").innerText = guessingWord.join("");
  document.getElementById("remainingGuesses").innerText = numGuess;
  document.getElementById("guessedLetters").innerText =  guessedLetters.join(" ");
};

// Espere a que se presione la tecla
document.onkeydown = function(event) {
  // AsegÃºrese de que la tecla presionada sea un carÃ¡cter alfabÃ©tico
  if (isLetter(event.key) && pause === false) {
  checkForLetter(event.key.toUpperCase());
  }
  // Apaga el mensaje parpadeante "... empezar" al presionar una tecla
  document.getElementById('welcome').className = 'noBlink';
};

// Comprueba si la letra presionada estÃ¡ entre A-Z o a-z
let isLetter = function(ch){
  return typeof ch === "string" && ch.length === 1
  && (ch >= "a" && ch <= "z" || ch >= "A" && ch <= "Z");
};

// Comprueba si la letra estÃ¡ en una palabra
function checkForLetter(letter) {
  let foundLetter = false;

  // Busca un string por letra 
  for (var i=0; i < wordToMatch.length; i++) {

    if (letter === wordToMatch[i]) {
      guessingWord[i] = letter
      foundLetter = true
      // Si la palabra que adivinaste coincide con una palabra aleatoria
      if (guessingWord.join("") === wordToMatch) {
        // Incrementar el nÃºmero de victorias y agregar palabras a usedGuessingWords.
        wins++
        // Agregar palabra al arreglo usedGuessingWords para que no se repita
        usedGuessingwWords.push(wordToMatch)
        console.log(usedGuessingwWords)
        pause = true;
        winSound.play();
        updateDisplay();
        setTimeout(resetGame, 4000);
      }
    }

  }

  if (foundLetter === false) {
    // Compruebe si la suposiciÃ³n incorrecta ya estÃ¡ en la lista
    if (guessedLetters.includes(letter) === false) {
      // Agregar letra incorrecta a la lista de letras adivinadas
      guessedLetters.push(letter)
      // Disminuir el nÃºmero de aciertos restantes
      numGuess--
    }

    if (numGuess === 0) {
      // Agregar palabra al arreglo usedGuessingWords para que no se repita
      usedGuessingwWords.push(wordToMatch);
      console.log(usedGuessingwWords)
      // Mostrar palabra antes de reiniciar el juego
      guessingWord = wordToMatch.split();
      pause = true;
      loseSound.play();
      setTimeout(resetGame, 4000);
    }
  }

  updateDisplay();

};

initializeGame();
</code></pre></div>
                </div>
        </div>
        </section>
        
    </section>

    <footer>
        <p>&copy; 2021 Hernando Abella</p>
    </footer>

    <!--Scripts-->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/prism.min.js"></script>
    <script src="./component.js"></script>
    <script src="./script.js"></script>
</body>
</html>