<!-- Made by Hernando Abella -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Captura al emoji</title>
    <link rel="stylesheet" href="./component.css">
    <link rel="stylesheet" href="/temaPrism.css">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
</head>
<body>
    <div class="backbar">
        <a href="/proyectos/"><i class="fas fa-arrow-left"></i></a>
    </div>

    <section class="codigo__del__proyecto">
        <div class="app__background">
            <div class="app__container">
                
                <!-- app code goes here -->

                <div class="s">
                <div class="main-wrapper">
		<!-- Menú principal -->
		<div id="menuCont" class="content-wrapper menu-cont">
			<div class="logo"></div>
			<div class="sec-title-emoji"></div>
			<menu class="menu-buttons-cont">
				<button id="newGameButton" type="button" class="primary-button new-game-button">Nuevo Juego</button>
				<button id="highScoresButton" type="button" class="primary-button menu-button">Puntuaciones altas</button>
				<button id="aboutButton" type="button" class="primary-button menu-button">Sobre el juego</button>
				
			</menu>
		</div>

		<!-- Título del nivel -->
		<div id="levelTitleCont" class="content-wrapper level-cont">
			<h2 id="levelNumberTitle" class="level-num">Nivel 999</h2>
			<h3 id="levelGoalTitle" class="level-goal">Intenta capturar X emojis en Y segundos.</h3>
			<button id="startLevelButton" type="button" class="primary-button start-level-button" name="button">Empezar</button>
		</div>

		<!-- Espacio del juego -->
		<div id="gameSpaceCont" class="content-wrapper game-space-cont">
			<div class="game-header">
				<div class="game-stats-cont">
					<span class="game-stat stat-level">
						<p class="stat-title">Nivel</p>
						<p id="inGameLevelNum" class="stat-num">999</p>
					</span>
					<span class="game-stat stat-score">
						<p class="stat-title">Puntuación</p>
						<p id="gameScore" class="stat-num">0</p>
					</span>
					<span class="game-stat stat-time">
						<p class="stat-title">Tiempo</p>
						<p id="gameTime" class="stat-num">0</p>
					</span>
				</div>
				<div class="time-progress">
					<div id="progressLine" class="progress-line"></div>
				</div>
			</div>
			<div id="gameSpace" class="game-space">
			</div>
			<button id="pauseGameButton" class="pause-button" type="button" name="button">Pausa</button>
		</div>

		<!-- Se acabó el tiempo -->
		<div id="timesUpCont" class="content-wrapper times-up-cont">
			<h2 class="pri-title white-text">¡Se acabó el tiempo!</h2>
			<h3 id="timesUpDescription" class="sec-title white-text">Capturaste 16 emoticones, y tienes que capturar al menos 40 para pasar este nivel.</h3>
			<button id="tryAgainButton" type="button" class="primary-button all-white-button">Intentalo de nuevo 👍</button>
			<button id="timesUpEndGameButton" type="button" class="primary-button all-white-button">Juego finalizado 😭</button>
		</div>

		<!-- Juego pausado -->
		<div id="gamePausedCont" class="content-wrapper game-pasued-cont">
			<h2 class="pri-title white-text">¡Juego pausado!</h2>
			<h3 id="gamePausedDescription" class="sec-title white-text">Capturaste 16 emoticones, y tienes que capturar al menos 40 para pasar este nivel.</h3>
			<button id="continueGameButton" type="button" class="primary-button all-white-button">Continuar 👍</button>
			<button id="gamePauseEndGameButton" type="button" class="primary-button all-white-button">Finalizar juego 😭</button>
		</div>

		<!-- Nivel pasado -->
		<div id="levelPassedCont" class="content-wrapper level-passed-cont">
			<h2 class="pri-title black-text">¡Ganaste!</h2>
			<h3 id="levelPassedDescreption" class="sec-title black-text">¡Capturaste todos los 30 emoticones!</h3>
			<hr>
			<h3 id="nextLevelDesc" class="sec-title black-text">Ahora intenta capturar 40 emoticones.</h3>
			<button id="continueNextLevelButton" type="button" class="primary-button all-black-button">Level 2 👍</button>
		</div>

	</div>
                </div>
                
                <!-- app code goes here -->

            </div>
        </div>        
        <section class="contenido__proyecto">
            <h1 class="h1">Captura al emoji</h1>
        <br>
        <p>Reproduce tus canciones favoritas con esta aplicación.</p>
        <br>
        <div class="flexNav">
            <ul class="breadcrumb">
                <li><a href="/index.html">Inicio</a></li>
                <li><a href="/proyectos">Proyectos</a></li>
                <li>Captura al emoji</li>
            </ul>
        
            <div class="download">
                <a href="../captura-al-emoji.rar" download><i class="fas fa-download"></i></a>
                <a href="#">YouTube</a>
            </div>
        </div>

        <br>

        <div class="code__container">
            <h5 class="html__tag">HTML</h5>
            <div class="panel">
                    <div class="codigo__htmlt">
                        <div class="decor__bar html"></div>
                        <pre class="line-numbers"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;meta charset=&quot;UTF-8&quot;&gt;
&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot;/&gt;
&lt;meta name=&quot;HandheldFriendly&quot; content=&quot;true&quot;/&gt;
&lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot; /&gt;
&lt;head&gt;

&#x9;&lt;title&gt;Captura al emoji&lt;/title&gt;
&#x9;&lt;link href=&quot;style.css&quot; rel=&quot;stylesheet&quot;&gt;


&lt;/head&gt;
&lt;body ontouchstart=&quot;&quot;&gt;
&#x9;&lt;div class=&quot;main-wrapper&quot;&gt;
&#x9;&#x9;&lt;!-- Men&uacute; principal --&gt;
&#x9;&#x9;&lt;div id=&quot;menuCont&quot; class=&quot;content-wrapper menu-cont&quot;&gt;
&#x9;&#x9;&#x9;&lt;div class=&quot;logo&quot;&gt;&lt;/div&gt;
&#x9;&#x9;&#x9;&lt;div class=&quot;sec-title-emoji&quot;&gt;&lt;/div&gt;
&#x9;&#x9;&#x9;&lt;menu class=&quot;menu-buttons-cont&quot;&gt;
&#x9;&#x9;&#x9;&#x9;&lt;button id=&quot;newGameButton&quot; type=&quot;button&quot; class=&quot;primary-button new-game-button&quot;&gt;Nuevo Juego&lt;/button&gt;
&#x9;&#x9;&#x9;&#x9;&lt;button id=&quot;highScoresButton&quot; type=&quot;button&quot; class=&quot;primary-button menu-button&quot;&gt;Puntuaciones altas&lt;/button&gt;
&#x9;&#x9;&#x9;&#x9;&lt;button id=&quot;aboutButton&quot; type=&quot;button&quot; class=&quot;primary-button menu-button&quot;&gt;Sobre el juego&lt;/button&gt;
&#x9;&#x9;&#x9;&#x9;
&#x9;&#x9;&#x9;&lt;/menu&gt;
&#x9;&#x9;&lt;/div&gt;

&#x9;&#x9;&lt;!-- T&iacute;tulo del nivel --&gt;
&#x9;&#x9;&lt;div id=&quot;levelTitleCont&quot; class=&quot;content-wrapper level-cont&quot;&gt;
&#x9;&#x9;&#x9;&lt;h2 id=&quot;levelNumberTitle&quot; class=&quot;level-num&quot;&gt;Nivel 999&lt;/h2&gt;
&#x9;&#x9;&#x9;&lt;h3 id=&quot;levelGoalTitle&quot; class=&quot;level-goal&quot;&gt;Intenta capturar X emojis en Y segundos.&lt;/h3&gt;
&#x9;&#x9;&#x9;&lt;button id=&quot;startLevelButton&quot; type=&quot;button&quot; class=&quot;primary-button start-level-button&quot; name=&quot;button&quot;&gt;Empezar&lt;/button&gt;
&#x9;&#x9;&lt;/div&gt;

&#x9;&#x9;&lt;!-- Espacio del juego --&gt;
&#x9;&#x9;&lt;div id=&quot;gameSpaceCont&quot; class=&quot;content-wrapper game-space-cont&quot;&gt;
&#x9;&#x9;&#x9;&lt;div class=&quot;game-header&quot;&gt;
&#x9;&#x9;&#x9;&#x9;&lt;div class=&quot;game-stats-cont&quot;&gt;
&#x9;&#x9;&#x9;&#x9;&#x9;&lt;span class=&quot;game-stat stat-level&quot;&gt;
&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;p class=&quot;stat-title&quot;&gt;Nivel&lt;/p&gt;
&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;p id=&quot;inGameLevelNum&quot; class=&quot;stat-num&quot;&gt;999&lt;/p&gt;
&#x9;&#x9;&#x9;&#x9;&#x9;&lt;/span&gt;
&#x9;&#x9;&#x9;&#x9;&#x9;&lt;span class=&quot;game-stat stat-score&quot;&gt;
&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;p class=&quot;stat-title&quot;&gt;Puntuaci&oacute;n&lt;/p&gt;
&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;p id=&quot;gameScore&quot; class=&quot;stat-num&quot;&gt;0&lt;/p&gt;
&#x9;&#x9;&#x9;&#x9;&#x9;&lt;/span&gt;
&#x9;&#x9;&#x9;&#x9;&#x9;&lt;span class=&quot;game-stat stat-time&quot;&gt;
&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;p class=&quot;stat-title&quot;&gt;Tiempo&lt;/p&gt;
&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;p id=&quot;gameTime&quot; class=&quot;stat-num&quot;&gt;0&lt;/p&gt;
&#x9;&#x9;&#x9;&#x9;&#x9;&lt;/span&gt;
&#x9;&#x9;&#x9;&#x9;&lt;/div&gt;
&#x9;&#x9;&#x9;&#x9;&lt;div class=&quot;time-progress&quot;&gt;
&#x9;&#x9;&#x9;&#x9;&#x9;&lt;div id=&quot;progressLine&quot; class=&quot;progress-line&quot;&gt;&lt;/div&gt;
&#x9;&#x9;&#x9;&#x9;&lt;/div&gt;
&#x9;&#x9;&#x9;&lt;/div&gt;
&#x9;&#x9;&#x9;&lt;div id=&quot;gameSpace&quot; class=&quot;game-space&quot;&gt;
&#x9;&#x9;&#x9;&lt;/div&gt;
&#x9;&#x9;&#x9;&lt;button id=&quot;pauseGameButton&quot; class=&quot;pause-button&quot; type=&quot;button&quot; name=&quot;button&quot;&gt;Pausa&lt;/button&gt;
&#x9;&#x9;&lt;/div&gt;

&#x9;&#x9;&lt;!-- Se acab&oacute; el tiempo --&gt;
&#x9;&#x9;&lt;div id=&quot;timesUpCont&quot; class=&quot;content-wrapper times-up-cont&quot;&gt;
&#x9;&#x9;&#x9;&lt;h2 class=&quot;pri-title white-text&quot;&gt;&iexcl;Se acab&oacute; el tiempo!&lt;/h2&gt;
&#x9;&#x9;&#x9;&lt;h3 id=&quot;timesUpDescription&quot; class=&quot;sec-title white-text&quot;&gt;Capturaste 16 emoticones, y tienes que capturar al menos 40 para pasar este nivel.&lt;/h3&gt;
&#x9;&#x9;&#x9;&lt;button id=&quot;tryAgainButton&quot; type=&quot;button&quot; class=&quot;primary-button all-white-button&quot;&gt;Intentalo de nuevo &#x1F44D;&lt;/button&gt;
&#x9;&#x9;&#x9;&lt;button id=&quot;timesUpEndGameButton&quot; type=&quot;button&quot; class=&quot;primary-button all-white-button&quot;&gt;Juego finalizado &#x1F62D;&lt;/button&gt;
&#x9;&#x9;&lt;/div&gt;

&#x9;&#x9;&lt;!-- Juego pausado --&gt;
&#x9;&#x9;&lt;div id=&quot;gamePausedCont&quot; class=&quot;content-wrapper game-pasued-cont&quot;&gt;
&#x9;&#x9;&#x9;&lt;h2 class=&quot;pri-title white-text&quot;&gt;&iexcl;Juego pausado!&lt;/h2&gt;
&#x9;&#x9;&#x9;&lt;h3 id=&quot;gamePausedDescription&quot; class=&quot;sec-title white-text&quot;&gt;Capturaste 16 emoticones, y tienes que capturar al menos 40 para pasar este nivel.&lt;/h3&gt;
&#x9;&#x9;&#x9;&lt;button id=&quot;continueGameButton&quot; type=&quot;button&quot; class=&quot;primary-button all-white-button&quot;&gt;Continuar &#x1F44D;&lt;/button&gt;
&#x9;&#x9;&#x9;&lt;button id=&quot;gamePauseEndGameButton&quot; type=&quot;button&quot; class=&quot;primary-button all-white-button&quot;&gt;Finalizar juego &#x1F62D;&lt;/button&gt;
&#x9;&#x9;&lt;/div&gt;

&#x9;&#x9;&lt;!-- Nivel pasado --&gt;
&#x9;&#x9;&lt;div id=&quot;levelPassedCont&quot; class=&quot;content-wrapper level-passed-cont&quot;&gt;
&#x9;&#x9;&#x9;&lt;h2 class=&quot;pri-title black-text&quot;&gt;&iexcl;Ganaste!&lt;/h2&gt;
&#x9;&#x9;&#x9;&lt;h3 id=&quot;levelPassedDescreption&quot; class=&quot;sec-title black-text&quot;&gt;&iexcl;Capturaste todos los 30 emoticones!&lt;/h3&gt;
&#x9;&#x9;&#x9;&lt;hr&gt;
&#x9;&#x9;&#x9;&lt;h3 id=&quot;nextLevelDesc&quot; class=&quot;sec-title black-text&quot;&gt;Ahora intenta capturar 40 emoticones.&lt;/h3&gt;
&#x9;&#x9;&#x9;&lt;button id=&quot;continueNextLevelButton&quot; type=&quot;button&quot; class=&quot;primary-button all-black-button&quot;&gt;Level 2 &#x1F44D;&lt;/button&gt;
&#x9;&#x9;&lt;/div&gt;

&#x9;&lt;/div&gt;

&#x9;&lt;script src=&quot;./script.js&quot;&gt;&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre></div>
                </div>
            
            <hr>

            <h5 class="css__tag">CSS</h5>
            <div class="panel">
                    <div class="codigo__css">
                        <div class="decor__bar css"></div>
                        <pre class="line-numbers"><code class="language-css">@import url('https://fonts.googleapis.com/css2?family=Gemunu+Libre:wght@300&display=swap');

*{
  box-sizing: border-box;
  padding: 0;
  margin: 0;
  user-select: none;
}

body{
  font-family: 'Gemunu Libre', sans-serif;
  font-size: 20px;
  background: #003844;
}

h1 {
  font-size: 52px;
}

h2 {
  font-size: 32px;
}

h3 {
  font-size: 20px;
}

.white-text {
  color: white;
}

.black-text {
  color: black;
}

.main-wrapper {
  width: 360px;
  height: 500px;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
}

.content-wrapper {
  width: 100%;
  height: 100%;
  position: absolute;;
  top:0;
  left:0;
  text-align: center;
  padding: 0 20px;
  border-radius: 5px;
}

/* ---------- Páginas ---------- */

.menu-cont { z-index: 0; display: block;}
.level-cont{ z-index: 1; display: none;}
.game-space-cont { z-index: 2; display: none;}
.times-up-cont { z-index: 3; display: none;}
.game-pasued-cont { z-index: 4; display: none;}
.level-passed-cont { z-index: 5; display: none;}

/* ---------- Páginas ---------- */



/* -------------- Menú Principal -------------- */

.menu-cont {
  background: #006C67;
  color: white;
  text-align: center;
}

.logo {
  width: 242px;
  height: 132px;
  background: url('images/logo.svg') no-repeat;
  margin: 30px auto 0;
}

.sec-title-emoji {
  width: 72px;
  height: 32px;
  margin: 20px auto 0;
  background: url('images/sec-title-emoji.png') no-repeat;
  background-size: 100%;
}

.menu-buttons-cont {
  margin: 20px auto 0;
}

.primary-button {
  width: 100%;
  height: 60px;
  line-height: 52px;
  font-weight: 400;
  font-size: 20px;
  text-transform: uppercase;
  margin: 4% auto 0;
  border-radius: 30px;
  cursor: pointer;
  outline: none;
  background: none;
}

.menu-button {
  color: white;
  border: 2px solid rgba(255,255,255,0.5);
  cursor: pointer;
  outline: none;
}

.new-game-button {
  border: 2px solid rgba(255,255,255,1);
  color: white;
  cursor: pointer;
  outline: none;
}

.menu-button:active, .new-game-button:active{
  background: white;
  color: #FF0855;
  transform: scale(1.1);
}


/* -------------- Titulo de nivel -------------- */

.level-cont{
  background: rgba(255,255,255,1);
}

.level-num {
  margin: 60px 0 0 0;
  text-transform: uppercase;
}

.level-goal {
  margin: 10px 0 0 0;
  font-weight: 400;
  color: rgba(0,0,0,0.6);
}

.start-level-button {
  border: solid 2px #FF0855;
  color: #FF0855;
  margin: 60px 0 0 0;
}

.start-level-button:active {
  background: #FF0855;
  color: white;
  transform: scale(1.1);
}

/* -------------- Espacio del juego -------------- */

.game-space-cont {
  background: white;
  padding: 0;
}

/* -----------  Alto para los elementos de la pantalla principal del juego ----------- */

.game-header { height: 10%; }
.game-space { height: 80%; }
.pause-button { height: 10%; }

/* ----------------------------------------------------------- */

.game-header {
  color: white;
  position: relative;
}

.game-stats-cont {
  margin: 0 auto;
  background-image: linear-gradient(-90deg, #FF138E 0%, #FF0855 100%);
  height: 94%;
  font-size: 0;
  padding: 2% 0 0 0;
  border-radius: 5px 5px 0px 0px;
}

.game-stat {
  display: inline-block;
  width: calc(100% / 3);
}

.stat-title {
  font-size: 12px;
}

.stat-num {
  font-size: 18px;
}

.stat-level {
  padding: 0 15% 0 0;
}

.stat-time {
  padding: 0 0 0 15%;
}

.time-progress {
  height: 6%;
}

.progress-line {
  background: #00E3FF;
  height: 100%;
}

.game-space {
  background: white;
  width: 100%;
  position: relative;
}

.pause-button {
  width: 100%;
  border: none;
  background: #00E3FF;
  color: rgba(0,0,0,0.8);
  font-size: 18px;
  outline: none;
  cursor: pointer;
  border-radius: 0px 0px 5px 5px;
}

.pause-button:active {
  transform: scale(1.1);
  background: #07cae2;
  box-shadow: 0 -10px 50px -10px rgba(7, 202, 226, 0.5);
}

#emoticon {
  font-size: 60px;
  text-align: center;
  width: 13.75%;
  position: absolute;
  cursor: pointer;
  vertical-align: middle;
  animation: growAnimation 0.15s cubic-bezier(0.68, -0.55, 0.27, 1.55) 0s backwards;
  -webkit-animation: growAnimation 0.15s cubic-bezier(0.68, -0.55, 0.27, 1.55) 0s backwards;
  -moz-animation: growAnimation 0.15s cubic-bezier(0.68, -0.55, 0.27, 1.55) 0s backwards;
}

/* -------------- Se acabó el tiempo -------------- */

.times-up-cont {
  background: rgba(100,0,0,0.9);
}

.pri-title {
  text-transform: uppercase;
  margin: 60px 0 0 0;
}

.sec-title {
  font-weight: 400;
  margin: 10px 0 30px 0;
}

.all-white-button {
  border: 2px solid rgba(255,255,255,1);
  color: white;
  cursor: pointer;
  outline: none;
  margin: 30px auto 0;
}

.all-white-button:active{
  background: white;
  color: #000000;
  transform: scale(1.1);
}

/* -------------- Juego pausado -------------- */

.game-pasued-cont {
  background: rgba(0,0,0,0.9);
}

/* -------------- Nivel pasado -------------- */

.level-passed-cont {
  background: #FFEBC6;
}

.all-black-button {
  border: 2px solid rgba(0,0,0,1);
  color: black;
  cursor: pointer;
  outline: none;
  margin: 30px auto 0;
}

.all-black-button:active{
  background: black;
  color: white;
  transform: scale(1.1);
  box-shadow: 0 10px 50px -10px rgba(0, 0, 0, 0.5);
}

audio{
  display: none;
}

/* Animación */

@-webkit-keyframes growAnimation {
  0%   {
    opacity: 0;
    transform: scale(0);
  }
  100% {
    opacity: 1;
    transform: scale(1.5);
  }
}
@keyframes growAnimation {
  0%   {
    opacity: 0;
    transform: scale(0);
  }
  100% {
    opacity: 1;
    transform: scale(1.5);
  }
}

/* Responsive */

@media screen and (max-width: 640px){
  .main-wrapper {
    width: 100%;
    height:100vh;
    max-height: 100vh;
  }
}</code></pre></div>
                </div>

            <hr>

            <h5 class="javascript__tag">JAVASCRIPT</h5>
            
            <div class="panel">
                    <div class="codigo__javascript">
                        <div class="decor__bar javascript"></div>
                        <pre class="line-numbers"><code class="language-javascript">// ----------- Ajustes del juego ----------- //

let currentLevel = 1; // El número de nivel actual
let totalLevels; // Número total de niveles en el juego.

let emojiTapsCount = 0;

let generateRandomNumb = function(minNumb, maxNumb) { // Generar un numero aletario en un rango
  return Math.floor(Math.random() * (maxNumb - minNumb + 1)) + minNumb;
}

let getObjectLength = function(l) { // Obtener el largo de un objeto
  return Object.keys(l).length;
}

let windowSize = { // Obtener el tamaño de la pagina
    width: window.innerWidth || document.body.clientWidth,
    height: window.innerHeight || document.body.clientHeight
}

// Paginas / Contenedores
let menuCont = document.getElementById('menuCont');
let levelTitleCont = document.getElementById('levelTitleCont');
let gameSpaceCont = document.getElementById('gameSpaceCont');
let timesUpCont = document.getElementById('timesUpCont');
let gamePauseCont = document.getElementById('gamePausedCont');
let levelPassedCont = document.getElementById('levelPassedCont');

// Botones del menu & llamadas a la acción
let newGameButton = document.getElementById('newGameButton');
let highScoresButton = document.getElementById('highScoresButton');
let aboutButton = document.getElementById('aboutButton');

// Pantalla de título de nivel
let levelNumberTitle = document.getElementById('levelNumberTitle');
let levelGoalTitle = document.getElementById('levelGoalTitle');

// Botón de nivel de inicio
let startLevelButton = document.getElementById('startLevelButton');

// Pausar pantalla
let continueGameButton = document.getElementById('continueGameButton');
let gamePauseEndGameButton = document.getElementById('gamePauseEndGameButton');
let gamePausedDescription = document.getElementById('gamePausedDescription');

// Espacio del juego
let progressLine = document.getElementById('progressLine');
let gameTime = document.getElementById('gameTime');
let gameScore = document.getElementById('gameScore');
let gameSpace = document.getElementById('gameSpace');
let inGameLevelNum = document.getElementById('inGameLevelNum');

// Pantalla se acabó el tiempo
let tryAgainButton = document.getElementById('tryAgainButton');
let timesUpDescription = document.getElementById('timesUpDescription');
let timesUpEndGameButton = document.getElementById('timesUpEndGameButton');

// Pantalla de nivel superado
let levelPassedDescreption = document.getElementById('levelPassedDescreption');
let nextLevelDesc = document.getElementById('nextLevelDesc');
let continueNextLevelButton = document.getElementById('continueNextLevelButton');

// Finalizar los botones del juego e ir a la página de inicio del juego
let endGameGoHome = function() {
  emoji.destroy();
  updateGameLevelValue(1); // Vuelve al nivel 1
  menuCont.style.display = "block";
  timesUpCont.style.display = "none";
  gamePauseCont.style.display = "none";
  levelTitleCont.style.display = "none";
  gameSpaceCont.style.display = "none";
  levelPassedCont.style.display = "none";
}

// Actualizar el número de nivel en el espacio del juego
let updateGameLevelValue = function(levelNumb) {
  inGameLevelNum.innerHTML = levelNumb;
}

updateGameLevelValue(currentLevel);

// Haz el progreso al 100%
progressLine.style.width = "100%";

// Tiempo de juego y tiempo restante
let playTime, timeLeft;

// ------------------------------------------------------- //

let timeEngines = {
  start: function() {
    gameTime.innerHTML = timeLeft; // muestra el tiempo restante en la pantalla
    // Ejecute la barra de progreso y las funciones de tiempo
    progressTimer = setInterval(timeEngines.updateTimeProgress, 100); // Cada 0,1 de segundo
    countDownTimer = setInterval(timeEngines.updateTime, 1000); // Cada segundo
  },
  stop: function() {
    clearInterval(countDownTimer);
    clearInterval(progressTimer);
  },
  reset: function(time) {
    emojiTapsCount = 0;
    gameScore.innerHTML = emojiTapsCount; // Restablecer la puntuación a 0
    progressValue = 100; // Valor de la barra de progreso
    gameTime.innerHTML = time;
    timeLeft = time;
    playTime = time;
  },
  updateTimeProgress: function() { // Reste (100 / tiempo total de juego / 10) 10 para hacerlo más pequeño, y el tiempo es 0,1 de segundo (100 ms)
    progressValue = progressValue - (100/playTime/10);
    progressLine.style.width = progressValue + "%";
    timeEngines.checkTime(); // Comprueba si el tiempo del juego es 0
  },
  updateTime: function() { // Resta 1 de la etiqueta de tiempo de juego
    gameTime.innerHTML = gameTime.innerHTML - 1;
    timeLeft = gameTime.innerHTML;
  },
  checkTime: function() { // Comprueba si el tiempo del juego es 0 o no
    if (gameTime.innerHTML == 0) {
      game.timesUp();
    } else if (emojiTapsCount >= gameCurrentLevel.goal) {
      game.levelPassed();
    }
  },
}


// --------- NIVELES DE JUEGO --------- //

let levels = {}; // Objeto de niveles

let addLevel = function(n, g, t) { // Función de adición de niveles
  levels[n] = {goal: g, time: t};
}
addLevel(1, 4, 10); // Añadiendo el nivel 1

let updateLevelsCount = function() {
  totalLevels = getObjectLength(levels); // Obtener número de niveles
}
updateLevelsCount();

const game = {
  start: function() {
    timeEngines.reset(gameCurrentLevel.time); // Restablecer la configuración del juego
    timeEngines.start();
    emoji.create();
  },
  stop: function() {
    timeEngines.stop();
  },
  reset: function() {
    timeEngines.reset(gameCurrentLevel.time); // Restablecer la configuración del juego
  },
  pause: function() {
    timeEngines.stop();
  },
  resume: function() {
    timeEngines.start();
  },
  checkScore: function() {
    if (emojiTapsCount >= gameCurrentLevel.goal) {
      game.levelPassed();
    } else {
      game.levelLost();
    }
  },
  levelPassed: function() {
    timeEngines.stop();
    currentLevel++; // Aumentar el nivel
    addLevel(currentLevel, currentLevel*4, 10); // Añadiendo el nivel 5
    updateLevelsCount();
    levelPassedCont.style.display = "block"; // Mostrar pantalla de nivel superado
    updateGameLevelValue(currentLevel); // Actualizar el número de nivel en el espacio del juego
    getGameCurrentLevel(currentLevel); // Obtener el objeto de nivel actual
    continueNextLevelButton.innerHTML = 'Start Level ' + currentLevel + ' 👍';
    levelPassedDescreption.innerHTML = 'You catched all the ' + emojiTapsCount + ' emoticons!';
    nextLevelDesc.innerHTML = 'Now try to catch ' + gameCurrentLevel.goal + ' emoticons.';
  },
  levelLost: function() {
    timesUpCont.style.display = "block";
    timesUpDescription.innerHTML = 'You catched ' + emojiTapsCount + ' emoticons, and you had to catch ' + gameCurrentLevel.goal + ' at least to complete this level.';
  },
  timesUp: function() {
    timeEngines.stop();
    game.checkScore(); // Comprobar la puntuación
  },
}

getGameCurrentLevel = function(levelNumb) {
  gameCurrentLevel = levels[levelNumb];
}
getGameCurrentLevel(currentLevel); // Obtener el objeto de nivel actual

var gameCurrentLevel = levels[currentLevel]; //gameLevel + número de nivel


// ----------- Establecer el título y el objetivo del nivel ----------- //
levelNumberTitle.innerHTML = 'Nivel ' + currentLevel;
levelGoalTitle.innerHTML = 'Intenta capturar ' + gameCurrentLevel.goal + ' emojis en ' + gameCurrentLevel.time + ' segundos.';


// ------------------ Botones ------------------ //
// Detén el efecto goma en iOS
document.ontouchmove = function(e) {
  e.preventDefault();
}

// Hacer clic en el botón Nuevo juego
newGameButton.onclick = function() {
  menuCont.style.display = "none";
  levelTitleCont.style.display = "block";
}

// Hacer clic en el botón de nivel de inicio
startLevelButton.onclick = function() {
  levelTitleCont.style.display = "none";
  gameSpaceCont.style.display = "block";
  game.start(); // Empezar juego
}

// Hacer clic en el botón Pausar juego
pauseGameButton.onclick = function() {
  gamePauseCont.style.display = "block";
  game.pause(); // Pausar juego
  gamePausedDescription.innerHTML = 'Capturaste ' + emojiTapsCount + ' emoticones, y tienes que capturar ' + gameCurrentLevel.goal + ' al menos para completar este nivel.'
}

// Hacer clic en el botón Continuar juego
continueGameButton.onclick = function() {
  gamePauseCont.style.display = "none";
  game.resume();
}

// Hacer clic en los botones de finalización del juego
gamePauseEndGameButton.onclick = function() {
  endGameGoHome();
}
timesUpEndGameButton.onclick = function() {
  endGameGoHome();
}

// Al hacer clic en Intentar de nuevo en la pantalla que perdió
tryAgainButton.onclick = function() {
  emoji.destroy();
  timesUpCont.style.display = "none";
  game.start();
}

// Haciendo clic en el botón Ir al siguiente nivel
continueNextLevelButton.onclick = function() {
  levelPassedCont.style.display = "none";
  emoji.destroy();
  game.reset();
  game.start(); // Empezar juego
}

// -------------------------------------------- //

soundPool = function() { // sonidos que quiero precargar

}

// Agrega 2 niveles más y luego haz cosas de sonido
// 1- Reproducir música de fondo
// 2- Botones de efectos de sonido
// 3- Música de pausa del juego
// 4- Ganas música
// 5- Perdiste la musica
// 6- Música emoji atrapada


let emojiDiv, emojiDivWidth, emojiDivHeight;

emoji = {
  tapCount: 0,
  names: ['702','703','706','710','712','745','755', '229'],
  create: function(){
    // Crea emoji y añádelo al contenedor div
    emojiDiv = document.createElement('img');
    emojiDiv.setAttribute('id', 'emoticon');
    emojiDiv.setAttribute('src', 'emoticons/' + emoji.names[emoji.random()] +'.png');
    gameSpace.appendChild(emojiDiv);
    emojiDivWidth = emojiDiv.offsetWidth;
    emojiDivHeight = emojiDivWidth;
    emoji.randomPosition(); // muestra el emmoticon en una posición aleatoria
    emojiDiv.onclick = function() { // al tocar el emoticono
      emoji.tap();
    }
  },
  random: function(){ // generar emoticonos aleatorios de la matriz
    return generateRandomNumb(0 , emoji.names.length - 1);
  },
  randomPosition: function(){ // mostrando el cuadro de emoticonos al azar
    emojiDiv.style.left = generateRandomNumb(emojiDivWidth, gameSpace.offsetWidth - emojiDivWidth) + 'px'; // random left position minus the emoticon width
    emojiDiv.style.top = generateRandomNumb(emojiDivWidth, gameSpace.offsetHeight - emojiDivHeight) + 'px'; // random top position minus the emoticon height
  },
  respawn: function(){ // volver a generar emoji en una posición aleatoria
    gameSpace.removeChild(emojiDiv);
    emojiDiv.setAttribute('src', 'emoticons/' + emoji.names[emoji.random()] +'.png'); // Obten un emoticon aleatorio
    emoji.randomPosition(); // obtener una posición aleatoria
    gameSpace.appendChild(emojiDiv);
  },
  tap: function(){
    tapAudio.play(); // Reproduce el efecto de sonido tap
    emoji.respawn(); // cambia el emoticon
    emojiTapsCount = ++emojiTapsCount; // agrega 1 al contador
    gameScore.innerHTML = emojiTapsCount + ' / ' + gameCurrentLevel.goal; // muestra el recuento en el cuadro de recuento
  },
  destroy: function() {
    gameSpace.removeChild(emojiDiv);
  }
}

// ------ INICIAR SONIDOS ------ //

tapAudio = {
  sounds: ['tap1','tap2','tap3','tap4','tap5','tap6','tap7','tap8'],
  generatePlayer: function() { // Crea un reproductor de audio y lo agregaa la página
    audioPlayer = document.createElement('audio');
    waveSource = document.createElement('source');
    audioPlayer.setAttribute('controls','');
    audioPlayer.appendChild(waveSource);
    document.body.appendChild(audioPlayer);
  },
  randomSound: function(){ // generar sonido aleatorio
    return generateRandomNumb(0, tapAudio.sounds.length - 1);
  },
  addSound: function() {
    waveSource.setAttribute('src', 'sounds/' + tapAudio.sounds[tapAudio.randomSound()] + '.wav');
    audioPlayer.load();
  },
  play: function() {
    tapAudio.addSound();
    audioPlayer.currentTime = 0;
    audioPlayer.play();
  }
}

tapAudio.generatePlayer();

// ------ SONIDOS FINALES ------ //
</code></pre></div>
                </div>
        </div>
        </section>
        
    </section>

    <footer>
        <p>&copy; 2021 Hernando Abella</p>
    </footer>

    <!--Scripts-->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/prism.min.js"></script>
    <script src="./component.js"></script>
    <script src="./script.js"></script>
</body>
</html>