<!-- Made by Hernando Abella -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reproductor de música</title>
    <link rel="stylesheet" href="./component.css">
    <link rel="stylesheet" href="/css/temaPrism.css">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
</head>
<body>
<header>
        <nav>
            <ul>
                <li>
                    <a href="../"><i class="fas fa-angle-left"></i></a>
                </li>
                <li>
                    <a href="/">Inicio</a>
                </li>
                <li>
                    <a href="/aprende/">Aprende</a>
                </li>
                <li>
                    <a href="/snippets/">Snippets</a>
                </li>
            </ul>
        </nav>
    </header>
    <section class="codigo__del__proyecto">
        <div class="app__background">
            <div class="app__container">
                
                <!-- app code goes here -->

                <div class="s">
                    <div class="music-container" id="music-container">
                        <div class="music-info">
                            <h4 id="title"></h4>
                            <div class="progress-container" id="progress-container">
                            <div class="progress" id="progress"></div>
                            </div>
                        </div>

                        <audio src="music/ukulele.mp3" id="audio"></audio>

                        <div class="img-container">
                            <img src="images/ukulele.jpg" alt="music-cover" id="cover" />
                        </div>
                        <div class="navigation">
                            <button id="prev" class="action-btn">
                            <i class="fas fa-backward"></i>
                            </button>
                            <button id="play" class="action-btn action-btn-big">
                            <i class="fas fa-play"></i>
                            </button>
                            <button id="next" class="action-btn">
                            <i class="fas fa-forward"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- app code goes here -->

            </div>
        </div>        
        <section class="contenido__proyecto">
        <h1 class="h1">Reproductor de música</h1>
        <p>Reproduce tus canciones favoritas con esta aplicación.</p>
        <div class="download">
                <a href="../reproductor-de-musica.rar" download><i class="fas fa-download descarga"></i></a>
                <a class="youtube" href="#"><i class="fab fa-youtube"></i></a>
            </div>
            

     

        <div class="code__container">
           
          <div class="html__container">
          <div class="panel">
                    <div class="codigo__htmlt">
                        <div class="decor__bar "></div>
                        <pre class="line-numbers"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot; /&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.2/css/all.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot; /&gt;
    &lt;title&gt;Reproductor de m&uacute;sica&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;

    &lt;div class=&quot;music-container&quot; id=&quot;music-container&quot;&gt;
      &lt;div class=&quot;music-info&quot;&gt;
        &lt;h4 id=&quot;title&quot;&gt;&lt;/h4&gt;
        &lt;div class=&quot;progress-container&quot; id=&quot;progress-container&quot;&gt;
          &lt;div class=&quot;progress&quot; id=&quot;progress&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;audio src=&quot;music/ukulele.mp3&quot; id=&quot;audio&quot;&gt;&lt;/audio&gt;

      &lt;div class=&quot;img-container&quot;&gt;
        &lt;img src=&quot;images/ukulele.jpg&quot; alt=&quot;music-cover&quot; id=&quot;cover&quot; /&gt;
      &lt;/div&gt;
      &lt;div class=&quot;navigation&quot;&gt;
        &lt;button id=&quot;prev&quot; class=&quot;action-btn&quot;&gt;
          &lt;i class=&quot;fas fa-backward&quot;&gt;&lt;/i&gt;
        &lt;/button&gt;
        &lt;button id=&quot;play&quot; class=&quot;action-btn action-btn-big&quot;&gt;
          &lt;i class=&quot;fas fa-play&quot;&gt;&lt;/i&gt;
        &lt;/button&gt;
        &lt;button id=&quot;next&quot; class=&quot;action-btn&quot;&gt;
          &lt;i class=&quot;fas fa-forward&quot;&gt;&lt;/i&gt;
        &lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;

    &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre></div>
                </div>
          </div>
            
            <div class="css__container">
            <div class="panel">
                    <div class="codigo__css">
                        <div class="decor__bar "></div>
                        <pre class="line-numbers"><code class="language-css">@import url('https://fonts.googleapis.com/css?family=Lato&display=swap');

* {
  box-sizing: border-box;
}

body {
  background: rgba(252, 221, 221, 1);
  height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  font-family: 'Lato', sans-serif;
  margin: 0;
}

.music-container {
  background-color: #fff;
  border-radius: 15px;
  box-shadow: 0 20px 20px 0 rgba(252, 169, 169, 0.6);
  display: flex;
  padding: 20px 30px;
  position: relative;
  margin: 100px 0;
  z-index: 10;
}

.img-container {
  position: relative;
  width: 110px;
}

.img-container::after {
  content: '';
  background-color: #fff;
  border-radius: 50%;
  position: absolute;
  bottom: 100%;
  left: 50%;
  width: 20px;
  height: 20px;
  transform: translate(-50%, 50%);
}

.img-container img {
  border-radius: 50%;
  object-fit: cover;
  height: 110px;
  width: inherit;
  position: absolute;
  bottom: 0;
  left: 0;
  animation: rotate 3s linear infinite;
  animation-play-state: paused;
}

.music-container.play .img-container img {
  animation-play-state: running;
}

.navigation {
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1;
}

.action-btn {
  background-color: #fff;
  border: 0;
  color: #dfdbdf;
  font-size: 20px;
  cursor: pointer;
  padding: 10px;
  margin: 0 20px;
}

.action-btn.action-btn-big {
  color: #cdc2d0;
  font-size: 30px;
}

.action-btn:focus {
  outline: 0;
}

.music-info {
  background-color: rgba(255, 255, 255, 0.5);
  border-radius: 15px 15px 0 0;
  position: absolute;
  top: 0;
  left: 20px;
  width: calc(100% - 40px);
  padding: 10px 10px 10px 150px;
  opacity: 0;
  transform: translateY(0%);
  transition: transform 0.3s ease-in, opacity 0.3s ease-in;
  z-index: 0;
}

.music-container.play .music-info {
  opacity: 1;
  transform: translateY(-100%);
}

.music-info h4 {
  margin: 0;
}

.progress-container {
  background: #fff;
  border-radius: 5px;
  cursor: pointer;
  margin: 10px 0;
  height: 4px;
  width: 100%;
}

.progress {
  background-color: #fe8daa;
  border-radius: 5px;
  height: 100%;
  width: 0%;
  transition: width 0.1s linear;
}

@keyframes rotate {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(360deg);
  }
}</code></pre></div>
                </div>
            </div>

            <div class="js__container">
            <div class="panel">
                    <div class="codigo__javascript">
                        <div class="decor__bar "></div>
                        <pre class="line-numbers"><code class="language-javascript">const musicContainer = document.getElementById('music-container');
const playBtn = document.getElementById('play');
const prevBtn = document.getElementById('prev');
const nextBtn = document.getElementById('next');
const audio = document.getElementById('audio');
const progress = document.getElementById('progress');
const progressContainer = document.getElementById('progress-container');
const title = document.getElementById('title');
const cover = document.getElementById('cover');
const currTime = document.querySelector('#currTime');
const durTime = document.querySelector('#durTime');

// Arreglo de canciones
const songs = ['hey', 'summer', 'ukulele'];

// Mantener rastro de la canción
let songIndex = 2;

// Inicialmente carga los detalles de la canción en el DOM
loadSong(songs[songIndex]);

// Actualizar detalles de la canción
function loadSong(song) {
  title.innerText = song;
  audio.src = `music/${song}.mp3`;
  cover.src = `images/${song}.jpg`;
}

// Reproducir canción
function playSong() {
  musicContainer.classList.add('play');
  playBtn.querySelector('i.fas').classList.remove('fa-play');
  playBtn.querySelector('i.fas').classList.add('fa-pause');

  audio.play();
}

// Pausar canción
function pauseSong() {
  musicContainer.classList.remove('play');
  playBtn.querySelector('i.fas').classList.add('fa-play');
  playBtn.querySelector('i.fas').classList.remove('fa-pause');

  audio.pause();
}

// Canción anterior
function prevSong() {
  songIndex--;

  if (songIndex < 0) {
    songIndex = songs.length - 1;
  }

  loadSong(songs[songIndex]);

  playSong();
}

// Siguiente canción
function nextSong() {
  songIndex++;

  if (songIndex > songs.length - 1) {
    songIndex = 0;
  }

  loadSong(songs[songIndex]);

  playSong();
}

// Actualiza la barra de progreso
function updateProgress(e) {
  const { duration, currentTime } = e.srcElement;
  const progressPercent = (currentTime / duration) * 100;
  progress.style.width = `${progressPercent}%`;
}

// Ajusta la barra de progreso
function setProgress(e) {
  const width = this.clientWidth;
  const clickX = e.offsetX;
  const duration = audio.duration;

  audio.currentTime = (clickX / width) * duration;
}

// Obtiene la duración y el tiempo actual del tiempo de la canción

function DurTime (e) {
	const {duration,currentTime} = e.srcElement;
	let sec;
	let sec_d;

	// Define los minuto del tiempo actual
	let min = (currentTime==null)? 0:
	 Math.floor(currentTime/60);
	 min = min <10 ? '0'+min:min;

	// Define los segundos del tiempo actual
	function get_sec (x) {
		if(Math.floor(x) >= 60){
			
			for (let i = 1; i<=60; i++){
				if(Math.floor(x)>=(60*i) && Math.floor(x)<(60*(i+1))) {
					sec = Math.floor(x) - (60*i);
					sec = sec <10 ? '0'+sec:sec;
				}
			}
		}else{
		 	sec = Math.floor(x);
		 	sec = sec <10 ? '0'+sec:sec;
		 }
	} 

	get_sec (currentTime,sec);

	// Cambiar tiempo actual DOM
	currTime.innerHTML = min +':'+ sec;

	// Define la duración de los minutos
	let min_d = (isNaN(duration) === true)? '0':
		Math.floor(duration/60);
	 min_d = min_d <10 ? '0'+min_d:min_d;


	 function get_sec_d (x) {
		if(Math.floor(x) >= 60){
			
			for (let i = 1; i<=60; i++){
				if(Math.floor(x)>=(60*i) && Math.floor(x)<(60*(i+1))) {
					sec_d = Math.floor(x) - (60*i);
					sec_d = sec_d <10 ? '0'+sec_d:sec_d;
				}
			}
		}else{
		 	sec_d = (isNaN(duration) === true)? '0':
		 	Math.floor(x);
		 	sec_d = sec_d <10 ? '0'+sec_d:sec_d;
		 }
	} 

	// Define la duración de los segundos
	
	get_sec_d (duration);

	// Cambiar duración DOM
	durTime.innerHTML = min_d +':'+ sec_d;
		
};

// Event listeners
playBtn.addEventListener('click', () => {
  const isPlaying = musicContainer.classList.contains('play');

  if (isPlaying) {
    pauseSong();
  } else {
    playSong();
  }
});

// Evento para cambiar la canción
prevBtn.addEventListener('click', prevSong);
nextBtn.addEventListener('click', nextSong);

// Actualiza tiempo/canción
audio.addEventListener('timeupdate', updateProgress);

// Clic en la barra de progreso
progressContainer.addEventListener('click', setProgress);

// Fin de la canción
audio.addEventListener('ended', nextSong);

// Tiempo de la canción
audio.addEventListener('timeupdate',DurTime);
</code></pre></div>
                </div>
            </div>
            
        </div>
        </section>
        
    </section>
    <!--Scripts-->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/prism.min.js"></script>
    <script src="./component.js"></script>
    <script src="./script.js"></script>
</body>
</html>